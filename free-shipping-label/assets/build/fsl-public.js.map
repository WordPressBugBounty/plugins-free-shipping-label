{"version":3,"file":"fsl-public.js","mappings":"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","sources":["webpack://free-shipping-label/./assets/src/fsl-public.scss?ff67","webpack://free-shipping-label/webpack/bootstrap","webpack://free-shipping-label/webpack/runtime/make namespace object","webpack://free-shipping-label/./assets/src/fsl-public.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './fsl-public.scss';\n\njQuery( document ).ready( function () {\n\tconst $ = jQuery;\n\n\t/* <fs_premium_only> */\n\n\tconst { ajaxurl, options, placeholder_html } = devnet_fsl_ajax;\n\n\tconst state = {\n\t\tshowing: false,\n\t};\n\n\tconst updateFSLwidget = () => {\n\t\tconst updatableWidgets = $( '.fsl-wrapper[data-updatable=\"1\"]' );\n\n\t\tif ( ! updatableWidgets.length ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t$.ajax( {\n\t\t\ttype: 'get',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'fsl_update_progress_bar',\n\t\t\t},\n\t\t\tbeforeSend() {},\n\t\t\tsuccess( response ) {\n\t\t\t\tif ( ! response ) {\n\t\t\t\t\tresponse = placeholder_html;\n\t\t\t\t}\n\n\t\t\t\tupdatableWidgets.each( ( index, el ) => {\n\t\t\t\t\t$( el ).replaceWith( response );\n\t\t\t\t} );\n\t\t\t},\n\t\t} );\n\n\t\treturn false;\n\t};\n\n\tconst showNoticeBar = () => {\n\t\tif (\n\t\t\tstate.showing ||\n\t\t\toptions.notice_bar?.enable_bar === '0' ||\n\t\t\t! options.notice_bar?.enable_bar\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tstate.showing = true;\n\n\t\t$.ajax( {\n\t\t\ttype: 'get',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'fsl_show_notice_bar',\n\t\t\t},\n\t\t\tbeforeSend() {\n\t\t\t\t$( '.devnet_fsl-free-shipping.notice-bar' ).fadeOut(\n\t\t\t\t\tfunction () {\n\t\t\t\t\t\t$( this ).parent( '.fsl-wrapper' ).remove();\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t},\n\t\t\tsuccess( response ) {\n\t\t\t\tif ( response ) {\n\t\t\t\t\tconst parser = new DOMParser();\n\t\t\t\t\tconst doc = parser.parseFromString( response, 'text/html' );\n\n\t\t\t\t\tconst wrapper = $( doc ).find( '.fsl-wrapper' );\n\t\t\t\t\tconst noticeBar = $( doc ).find( '.notice-bar' );\n\n\t\t\t\t\tnoticeBar.append(\n\t\t\t\t\t\t'<span class=\"fsl-close-notice-bar\">âœ•</span>'\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( noticeBar.length > 1 ) {\n\t\t\t\t\t\tconst autohideClass =\n\t\t\t\t\t\t\toptions.notice_bar.autohide == 1\n\t\t\t\t\t\t\t\t? 'autohide'\n\t\t\t\t\t\t\t\t: 'hold';\n\n\t\t\t\t\t\tconst classes = [\n\t\t\t\t\t\t\t'fsl-multiple-notice-bars',\n\t\t\t\t\t\t\t'notice-bar',\n\t\t\t\t\t\t\tautohideClass,\n\t\t\t\t\t\t\toptions.notice_bar.position,\n\t\t\t\t\t\t];\n\n\t\t\t\t\t\twrapper.addClass( classes.join( ' ' ) );\n\n\t\t\t\t\t\twrapper.css( {\n\t\t\t\t\t\t\t'--fsl-notice-bar-margin-y':\n\t\t\t\t\t\t\t\toptions.notice_bar.margin_y,\n\t\t\t\t\t\t\t'--fsl-notice-bar-margin-x':\n\t\t\t\t\t\t\t\toptions.notice_bar.margin_x,\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Convert the modified DOM document back to an HTML string\n\t\t\t\t\tresponse = new XMLSerializer().serializeToString( doc );\n\n\t\t\t\t\t$( 'body' ).append( response );\n\t\t\t\t}\n\t\t\t},\n\t\t\tcomplete() {\n\t\t\t\tstate.showing = false;\n\t\t\t},\n\t\t} );\n\n\t\treturn false;\n\t};\n\n\t$( document.body ).on( 'wc_fragments_loaded', function () {\n\t\tupdateFSLwidget();\n\t} );\n\n\t$( document.body ).on( 'wc_fragments_refreshed', function () {\n\t\tupdateFSLwidget();\n\t} );\n\n\t$( document.body ).on( 'updated_cart_totals', function () {\n\t\tupdateFSLwidget();\n\t} );\n\n\t$( document.body ).on( 'updated_checkout', function () {\n\t\tupdateFSLwidget();\n\t} );\n\n\t$( document.body ).on( 'added_to_cart', function () {\n\t\tshowNoticeBar();\n\t} );\n\n\t// $( document.body ).on( 'removed_from_cart', function () {\n\t// \tconsole.log( 'removed_from_cart' );\n\t// } );\n\n\t// $( document.body ).on( 'wc_fragment_refresh', function () {\n\t// \tconsole.log( 'wc_fragment_refresh' );\n\t// } );\n\n\t// $( document.body ).on( 'wc_fragment_refresh updated_wc_div', function () {\n\t// \tconsole.log( 'wc_fragment_refresh updated_wc_div' );\n\t// } );\n\n\t$( document ).on(\n\t\t'click',\n\t\t'.devnet_fsl-free-shipping.notice-bar .fsl-close-notice-bar',\n\t\tfunction ( e ) {\n\t\t\t$( this )\n\t\t\t\t.closest( '.notice-bar' )\n\t\t\t\t.fadeOut( function () {\n\t\t\t\t\t$( this ).remove();\n\t\t\t\t} );\n\t\t}\n\t);\n\n\tconst wcCartDataStore = wp.data.select( 'wc/store/cart' );\n\n\tif ( wcCartDataStore ) {\n\t\tconst {\n\t\t\tgetCartData,\n\t\t\tisCustomerDataUpdating,\n\t\t\tisShippingRateBeingSelected,\n\t\t} = wcCartDataStore;\n\n\t\tconst storeState = {\n\t\t\tpreviousCartData: getCartData(),\n\t\t\tisCustomerDataUpdating: false,\n\t\t\tisShippingRateBeingSelected: false,\n\t\t};\n\n\t\tconst unsubscribeCart = wp.data.subscribe( () => {\n\t\t\tconst newCartData = getCartData();\n\t\t\tconst { totals, items_count } = newCartData;\n\n\t\t\tconst customerDataUpdated =\n\t\t\t\tstoreState.isCustomerDataUpdating && ! isCustomerDataUpdating();\n\n\t\t\tconst shippingRateSelected =\n\t\t\t\tstoreState.isShippingRateBeingSelected &&\n\t\t\t\t! isShippingRateBeingSelected();\n\n\t\t\tconst hasChanged =\n\t\t\t\ttotals.total_price !==\n\t\t\t\t\tstoreState.previousCartData.totals.total_price ||\n\t\t\t\titems_count !== storeState.previousCartData.items_count;\n\n\t\t\tif ( hasChanged || customerDataUpdated || shippingRateSelected ) {\n\t\t\t\tupdateFSLwidget();\n\t\t\t}\n\n\t\t\tstoreState.previousCartData = newCartData;\n\t\t\tstoreState.isCustomerDataUpdating = isCustomerDataUpdating();\n\t\t\tstoreState.isShippingRateBeingSelected =\n\t\t\t\tisShippingRateBeingSelected();\n\t\t}, 'wc/store/cart' );\n\t}\n\n\t/* </fs_premium_only> */\n} );\n"],"names":["jQuery","document","ready","$","ajaxurl","options","placeholder_html","devnet_fsl_ajax","state","showing","updateFSLwidget","updatableWidgets","length","ajax","type","url","data","action","beforeSend","success","response","each","index","el","replaceWith","showNoticeBar","notice_bar","enable_bar","fadeOut","parent","remove","parser","DOMParser","doc","parseFromString","wrapper","find","noticeBar","append","autohideClass","autohide","classes","position","addClass","join","css","margin_y","margin_x","XMLSerializer","serializeToString","complete","body","on","e","closest","wcCartDataStore","wp","select","getCartData","isCustomerDataUpdating","isShippingRateBeingSelected","storeState","previousCartData","unsubscribeCart","subscribe","newCartData","totals","items_count","customerDataUpdated","shippingRateSelected","hasChanged","total_price"],"sourceRoot":""}